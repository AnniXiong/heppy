<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>heppy.analyzers.Matcher.Matcher : API documentation</title>

    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link type="text/css" href="bootstrap.min.css" rel="stylesheet" />
    <link type="text/css" href="apidocs.css" rel="stylesheet" />
  </head>
  <body>

    <nav class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a href="index.html" class="navbar-brand">
            heppy API Documentation
          </a>
        </div>
      </div>
    </nav>

    <div id="showPrivate">
      <button onclick="togglePrivate()" class="btn btn-link">Toggle Private API</button>
    </div>

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code>heppy.analyzers.Matcher.Matcher(<a href="heppy.framework.analyzer.Analyzer.html" data-type="Class" class="code">Analyzer</a>)</code> <small>class documentation</small></h1>

        <span id="partOf">
          Part of <code><a href="heppy.html" data-type="Package" class="code">heppy</a>.<a href="heppy.analyzers.html" data-type="Package" class="code">analyzers</a>.<a href="heppy.analyzers.Matcher.html" data-type="Module" class="code">Matcher</a></code>
          
          <a href="classIndex.html#heppy.analyzers.Matcher.Matcher">(View In Hierarchy)</a>
        </span>
      </div>

      <div class="extrasDocstring">
        
      </div>

      <div class="moduleDocstring">
        <pre>Particle matcher. 

Works with any kind of object with a p4 function. 

Simple example configuration: 

from heppy.analyzers.Matcher import Matcher
papas_jet_match = cfg.Analyzer(
  Matcher,
  instance_label = 'papas', 
  delta_r = 0.3,
  match_particles = 'gen_jets',
  particles = 'papas_jets'
)

particles: Name of the collection containing the particles to be matched. 
match_particles: Name of the collection containing the particles where a match 
           is to be found. 

In this particular case, each jet in "papas_jets" will end up with a new 
attribute called "match". This attribute can be either the closest gen jet in the 
"gen_jets" collection in case a gen_jet is found within delta R = 0.3, 
or None in case a match cannot be found in this cone.

More complex example configuration: 

papas_particle_match_g2r = cfg.Analyzer(
  Matcher,
  instance_label = 'papas_g2r', 
  delta_r = 0.3, 
  particles = 'gen_particles_stable',
  match_particles = [
    ('papas_rec_particles', None),
    ('papas_rec_particles', 211),
    ('papas_rec_particles', 130),
    ('papas_rec_particles', 22)
  ] 
  )

In this case, each gen particle in gen_particles_stable will end up with the following 
new attributes: 
  - "match"    : closest reconstructed particle in "papas_rec_particles", if any. 
  - "match_211": closest reconstructed particle of pdgId 211 in "papas_rec_particles", 
                 if any. 
  - etc. 

TODO: Colin: was well adapted, but probably better to do something more modular.
for example: 
papas_jet_match = cfg.Analyzer(
  Matcher,
  instance_label = 'gen_jets_match', 
  delta_r = 0.3,
  match_particles = 'gen_jets',
  particles = 'papas_jets'
)
would create for each papas_jet: 
  papas_jet.gen_jets_match
that is a match object with 2 attributes: particle, distance
in the more complicated case, just need to use a Filter to select the particles,
and have several Matcher instances 

note: one cannot attach the distance to the matched particle as 
the match particle can be matched to another object... </pre>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id124">
  
  <tr class="method">
    
    <td>Method</td>
    <td><a href="heppy.analyzers.Matcher.Matcher.html#beginLoop" data-type="Method" class="code">beginLoop</a></td>
    <td><span>Automatically called by Looper, for all analyzers.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><a href="heppy.analyzers.Matcher.Matcher.html#process" data-type="Method" class="code">process</a></td>
    <td><span>Automatically called by Looper, for all analyzers. each analyzer in the 
sequence will be passed the same event instance. each analyzer can access, 
modify, and store event information, of any type.</span></td>
  </tr>
</table>
        
          <p class="inheritedFrom">
            Inherited from <a href="heppy.framework.analyzer.Analyzer.html" data-type="Class" class="code">Analyzer</a>:
          </p>
          <table class="children sortable" id="id125">
  
  <tr class="basemethod">
    
    <td>Method</td>
    <td><a href="heppy.framework.analyzer.Analyzer.html#__init__" data-type="Method" class="code">__init__</a></td>
    <td><span>Create an analyzer.</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="heppy.framework.analyzer.Analyzer.html#endLoop" data-type="Method" class="code">endLoop</a></td>
    <td><span>Automatically called by Looper, for all analyzers.</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="heppy.framework.analyzer.Analyzer.html#write" data-type="Method" class="code">write</a></td>
    <td><span>Called by Looper.write, for all analyzers. Just overload it if you have 
histograms to write.</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="heppy.framework.analyzer.Analyzer.html#__str__" data-type="Method" class="code">__str__</a></td>
    <td><span>A multipurpose printout. Should do the job for most analyzers.</span></td>
  </tr>
</table>
          

          
      </div>

      <div id="childList">

        <div class="basemethod">
  
  <a name="heppy.analyzers.Matcher.Matcher.beginLoop">
    
  </a>
  <a name="beginLoop">
    
  </a>
  <div class="functionHeader">
    
    def
    beginLoop(self, setup):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <a href="heppy.framework.analyzer.Analyzer.html#beginLoop" data-type="Method" class="code">heppy.framework.analyzer.Analyzer.beginLoop</a></div>
    
    <div><p>Automatically called by Looper, for all analyzers.</p><table class="fieldTable"></table></div>
  </div>
</div><div class="basemethod">
  
  <a name="heppy.analyzers.Matcher.Matcher.process">
    
  </a>
  <a name="process">
    
  </a>
  <div class="functionHeader">
    
    def
    process(self, event):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <a href="heppy.framework.analyzer.Analyzer.html#process" data-type="Method" class="code">heppy.framework.analyzer.Analyzer.process</a></div>
    
    <div><p>Automatically called by Looper, for all analyzers. each analyzer in the 
sequence will be passed the same event instance. each analyzer can access, 
modify, and store event information, of any type.</p><table class="fieldTable"></table></div>
  </div>
</div>

      </div>
      <address>
        <a href="index.html">API Documentation</a> for heppy, generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a> at 2016-11-02 16:20:55.
      </address>

    </div>

    <script type="text/javascript" src="pydoctor.js"></script>

  </body>
</html>