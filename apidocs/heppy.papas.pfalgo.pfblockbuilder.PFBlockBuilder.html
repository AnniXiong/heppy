<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>heppy.papas.pfalgo.pfblockbuilder.PFBlockBuilder : API documentation</title>

    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link type="text/css" href="bootstrap.min.css" rel="stylesheet" />
    <link type="text/css" href="apidocs.css" rel="stylesheet" />
  </head>
  <body>

    <nav class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a href="index.html" class="navbar-brand">
            heppy API Documentation
          </a>
        </div>
      </div>
    </nav>

    <div id="showPrivate">
      <button onclick="togglePrivate()" class="btn btn-link">Toggle Private API</button>
    </div>

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code>heppy.papas.pfalgo.pfblockbuilder.PFBlockBuilder(<a href="heppy.papas.pfalgo.blockbuilder.BlockBuilder.html" data-type="Class" class="code">BlockBuilder</a>)</code> <small>class documentation</small></h1>

        <span id="partOf">
          Part of <code><a href="heppy.html" data-type="Package" class="code">heppy</a>.<a href="heppy.papas.html" data-type="Package" class="code">papas</a>.<a href="heppy.papas.pfalgo.html" data-type="Package" class="code">pfalgo</a>.<a href="heppy.papas.pfalgo.pfblockbuilder.html" data-type="Module" class="code">pfblockbuilder</a></code>
          
          <a href="classIndex.html#heppy.papas.pfalgo.pfblockbuilder.PFBlockBuilder">(View In Hierarchy)</a>
        </span>
      </div>

      <div class="extrasDocstring">
        
      </div>

      <div class="moduleDocstring">
        <pre>PFBlockBuilder takes particle flow elements from an event (clusters,tracks etc)
and uses the distances between elements to construct a set of blocks
Each element will end up in one (and only one block)
Blocks retain information of the elements and the distances between elements
The blocks can then be used for future particle reconstruction
The ids must be unique and are expected to come from the Identifier class

attributes:

blocks  : dictionary of blocks {id1:block1, id2:block2, ...}
history_nodes : dictionary of nodes that describe which elements are parents of which blocks 
                if an existing history_nodes tree  eg one created during simulation
                is passed to the BlockBuilder then
                the additional history will be added into the exisiting history 
nodes : dictionary of nodes which describes the distances/links between elements
        the nodes dictionary will be used to create the blocks


Usage example:

    builder = PFBlockBuilder(pfevent, ruler)
    for b in builder.blocks.itervalues() :
        print b</pre>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id343">
  
  <tr class="method">
    
    <td>Method</td>
    <td><a href="heppy.papas.pfalgo.pfblockbuilder.PFBlockBuilder.html#__init__" data-type="Method" class="code">__init__</a></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><a href="heppy.papas.pfalgo.pfblockbuilder.PFBlockBuilder.html#_make_edge" data-type="Method" class="code">_make_edge</a></td>
    <td><span class="undocumented">No summary</span></td>
  </tr>
</table>
        
          <p class="inheritedFrom">
            Inherited from <a href="heppy.papas.pfalgo.blockbuilder.BlockBuilder.html" data-type="Class" class="code">BlockBuilder</a>:
          </p>
          <table class="children sortable" id="id344">
  
  <tr class="basemethod">
    
    <td>Method</td>
    <td><a href="heppy.papas.pfalgo.blockbuilder.BlockBuilder.html#__str__" data-type="Method" class="code">__str__</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><a href="heppy.papas.pfalgo.blockbuilder.BlockBuilder.html#__repr__" data-type="Method" class="code">__repr__</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod private">
    
    <td>Method</td>
    <td><a href="heppy.papas.pfalgo.blockbuilder.BlockBuilder.html#_make_blocks" data-type="Method" class="code">_make_blocks</a></td>
    <td><span>uses the DAGfloodfill algorithm in connection with the BlockBuilder 
nodes to work out which elements are connected Each set of connected 
elements will be used to make a new PFBlock</span></td>
  </tr>
</table>
          

          
      </div>

      <div id="childList">

        <div class="basemethod">
  
  <a name="heppy.papas.pfalgo.pfblockbuilder.PFBlockBuilder.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    def
    __init__(self, pfevent, ruler, history_nodes=None):
    
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <a href="heppy.papas.pfalgo.blockbuilder.BlockBuilder.html#__init__" data-type="Method" class="code">heppy.papas.pfalgo.blockbuilder.BlockBuilder.__init__</a></div>
    
    <pre>pfevent is event structure inside which we find
    tracks is a dictionary : {id1:track1, id2:track2, ...}
    ecal is a dictionary : {id1:ecal1, id2:ecal2, ...}
    hcal is a dictionary : {id1:hcal1, id2:hcal2, ...}
    get_object() which allows a cluster or track to be found from its id
ruler is something that measures distance between two objects eg track and hcal
    (see Distance class for example)
    it should take the two objects as arguments and return a tuple
    of the form
        link_type = 'ecal_ecal', 'ecal_track' etc
        is_link = true/false
        distance = float
history_nodes is an optional dictionary of Nodes : { id:Node1, id: Node2 etc}
    it could for example contain the simulation history nodes
    A Node contains the id of an item (cluster, track, particle etc)
    and says what it is linked to (its parents and children)
    if hist_nodes is provided it will be added to with the new block information
    If hist_nodes is not provided one will be created, it will contain nodes
    corresponding to each of the tracks, ecal etc and also for the blocks that
    are created by the event block builder.</pre>
  </div>
</div><div class="basemethod private">
  
  <a name="heppy.papas.pfalgo.pfblockbuilder.PFBlockBuilder._make_edge">
    
  </a>
  <a name="_make_edge">
    
  </a>
  <div class="functionHeader">
    
    def
    _make_edge(self, id1, id2, ruler):
    
  </div>
  <div class="docstring functionBody">
    
    
    <pre>id1, id2 are the unique ids of the two items
ruler is something that measures distance between two objects eg track and hcal
(see Distance class for example)
it should take the two objects as arguments and return a tuple
of the form
    link_type = 'ecal_ecal', 'ecal_track' etc
    is_link = true/false
    distance = float
an edge object is returned which contains the link_type, is_link (bool) and distance between the 
objects. </pre>
  </div>
</div>

      </div>
      <address>
        <a href="index.html">API Documentation</a> for heppy, generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a> at 2016-11-02 16:20:55.
      </address>

    </div>

    <script type="text/javascript" src="pydoctor.js"></script>

  </body>
</html>